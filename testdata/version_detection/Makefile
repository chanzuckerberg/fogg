# Auto-generated by fogg. Do not edit
# Make improvements in fogg, so that everyone can benefit.

include scripts/common.mk

ENVS=staging
MODULES=vpc
ACCOUNTS=

all: check

setup:
	curl -s https://raw.githubusercontent.com/chanzuckerberg/fogg/master/download.sh | bash -s -- -b .fogg/bin $(FOGG_VERSION)
	fogg setup
.PHONY: setup

lint: lint-terraform
.PHONY: lint

lint-terraform: lint-accounts lint-envs lint-modules
.PHONY: lint-terraform

lint-accounts:
	@for account in $(ACCOUNTS); do \
		$(MAKE) -C terraform/accounts/$$account lint || exit $$?; \
	done
.PHONY: lint-accounts

lint-envs:
	@for env in $(ENVS); do \
		$(MAKE) -C terraform/envs/$$env lint || exit $$?; \
	done; \
	$(MAKE) -C terraform/global lint || exit $$?
.PHONY: lint-envs

lint-modules:
	@for module in $(MODULES); do \
		$(MAKE) -C terraform/modules/$$module lint || exit $$?; \
	done
.PHONY: lint-modules

fmt: fmt-accounts fmt-envs fmt-global fmt-modules
.PHONY: fmt

fmt-accounts:
	@for account in $(ACCOUNTS); do \
		$(MAKE) -C terraform/accounts/$$account fmt || exit $$?; \
	done
.PHONY: fmt-accounts

fmt-envs:
	@for env in $(ENVS); do \
		$(MAKE) -C terraform/envs/$$env fmt || exit $$?; \
	done
.PHONY: fmt-envs

fmt-global:
	$(MAKE) -C terraform/global fmt || exit $$?
.PHONY: fmt-global

fmt-modules:
	@for module in $(MODULES); do \
		$(MAKE) -C terraform/modules/$$module fmt || exit $$?; \
	done
.PHONY: fmt-modules

docs: docs-envs docs-global docs-modules
.PHONY: docs

docs-accounts:
	@for account in $(ACCOUNTS); do \
		$(MAKE) -C terraform/accounts/$$account docs || exit $$?; \
	done
.PHONY: docs-accounts

docs-envs:
	@for env in $(ENVS); do \
		$(MAKE) -C terraform/envs/$$env docs || exit $$?; \
	done
.PHONY: docs-envs

docs-global:
	$(MAKE) -C terraform/global docs || exit $$?;
.PHONY: docs-global

docs-modules:
	@for module in $(MODULES); do \
		$(MAKE) -C terraform/modules/$$module docs || exit $$?; \
	done
.PHONY: docs-modules

test:
.PHONY: test

check: check-plan check-docs
.PHONY: check

check-plan: check-plan-accounts check-plan-envs check-plan-global
.PHONY: check-plan

check-plan-accounts:
	@for account in $(ACCOUNTS); do \
		$(MAKE) -C terraform/accounts/$$account check-plan || exit $$?; \
	done
.PHONY: check-plan-accounts

check-plan-envs:
	@for env in $(ENVS); do \
		$(MAKE) -C terraform/envs/$$env check-plan || exit $$?; \
	done
.PHONY: check-plan-envs

check-plan-global:
	$(MAKE) -C terraform/global check-plan || exit $$?
.PHONY: check-plan-global

check-docs:
	@for mod in $(MODULES); do \
		$(MAKE) -C terraform/modules/$$module check-docs || exit $$?; \
	done
.PHONY: check-docs

clean: clean-accounts clean-envs clean-global
.PHONY: clean

clean-accounts:
	@for account in $(ACCOUNTS); do \
		$(MAKE) -C terraform/accounts/$$account clean || exit $$?; \
	done
.PHONY: clean-accounts

clean-envs:
	@for env in $(ENVS); do \
		$(MAKE) -C terraform/envs/$$env clean || exit $$?; \
	done
.PHONY: clean-envs

clean-global:
	$(MAKE) -C terraform/global clean || exit $$?
.PHONY: clean-global

# Auto-generated by fogg. Do not edit
# Make improvements in fogg, so that everyone can benefit.

on: push

jobs:
  terraform_0:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set up Python 3.x
        uses: actions/setup-python@v1
        with:
          python-version: '3.6'
      - run: |
          # https://terraform-docs.io/user-guide/installation/#pre-compiled-binary
          curl -sSLo ./terraform-docs.tar.gz https://terraform-docs.io/dl/v0.14.1/terraform-docs-v0.14.1-$(uname)-amd64.tar.gz
          tar -xzf terraform-docs.tar.gz
          chmod +x terraform-docs
          echo "$PWD" >> $GITHUB_PATH
      - run: python3 -m venv venv
      - run: . venv/bin/activate
      - run: pip install awscli --upgrade --user
      - run: aws --version
      - run: FOGG_VERSION="vundefined-pre+undefined.dirty" make setup
      - run: |
          .fogg/bin/fogg apply
          git status
          git diff
          if [ "$(git status --porcelain)" != "" ]; then
            echo "git tree is dirty after running fogg apply"
            echo "ensure you run fogg apply on your branch"
            git status
            exit 1
          fi
      - run: |
          echo "start"
          ( cd terraform/global && make  lint )
  terraform_1:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set up Python 3.x
        uses: actions/setup-python@v1
        with:
          python-version: '3.6'
      - run: |
          # https://terraform-docs.io/user-guide/installation/#pre-compiled-binary
          curl -sSLo ./terraform-docs.tar.gz https://terraform-docs.io/dl/v0.14.1/terraform-docs-v0.14.1-$(uname)-amd64.tar.gz
          tar -xzf terraform-docs.tar.gz
          chmod +x terraform-docs
          echo "$PWD" >> $GITHUB_PATH
      - run: python3 -m venv venv
      - run: . venv/bin/activate
      - run: pip install awscli --upgrade --user
      - run: aws --version
      - run: FOGG_VERSION="vundefined-pre+undefined.dirty" make setup
      - run: |
          .fogg/bin/fogg apply
          git status
          git diff
          if [ "$(git status --porcelain)" != "" ]; then
            echo "git tree is dirty after running fogg apply"
            echo "ensure you run fogg apply on your branch"
            git status
            exit 1
          fi
      - run: |
          echo "start"
  terraform_2:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set up Python 3.x
        uses: actions/setup-python@v1
        with:
          python-version: '3.6'
      - run: |
          # https://terraform-docs.io/user-guide/installation/#pre-compiled-binary
          curl -sSLo ./terraform-docs.tar.gz https://terraform-docs.io/dl/v0.14.1/terraform-docs-v0.14.1-$(uname)-amd64.tar.gz
          tar -xzf terraform-docs.tar.gz
          chmod +x terraform-docs
          echo "$PWD" >> $GITHUB_PATH
      - run: python3 -m venv venv
      - run: . venv/bin/activate
      - run: pip install awscli --upgrade --user
      - run: aws --version
      - run: FOGG_VERSION="vundefined-pre+undefined.dirty" make setup
      - run: |
          .fogg/bin/fogg apply
          git status
          git diff
          if [ "$(git status --porcelain)" != "" ]; then
            echo "git tree is dirty after running fogg apply"
            echo "ensure you run fogg apply on your branch"
            git status
            exit 1
          fi
      - run: |
          echo "start"
  terraform_3:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set up Python 3.x
        uses: actions/setup-python@v1
        with:
          python-version: '3.6'
      - run: |
          # https://terraform-docs.io/user-guide/installation/#pre-compiled-binary
          curl -sSLo ./terraform-docs.tar.gz https://terraform-docs.io/dl/v0.14.1/terraform-docs-v0.14.1-$(uname)-amd64.tar.gz
          tar -xzf terraform-docs.tar.gz
          chmod +x terraform-docs
          echo "$PWD" >> $GITHUB_PATH
      - run: python3 -m venv venv
      - run: . venv/bin/activate
      - run: pip install awscli --upgrade --user
      - run: aws --version
      - run: FOGG_VERSION="vundefined-pre+undefined.dirty" make setup
      - run: |
          .fogg/bin/fogg apply
          git status
          git diff
          if [ "$(git status --porcelain)" != "" ]; then
            echo "git tree is dirty after running fogg apply"
            echo "ensure you run fogg apply on your branch"
            git status
            exit 1
          fi
      - run: |
          echo "start"
  terraform_4:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set up Python 3.x
        uses: actions/setup-python@v1
        with:
          python-version: '3.6'
      - run: |
          # https://terraform-docs.io/user-guide/installation/#pre-compiled-binary
          curl -sSLo ./terraform-docs.tar.gz https://terraform-docs.io/dl/v0.14.1/terraform-docs-v0.14.1-$(uname)-amd64.tar.gz
          tar -xzf terraform-docs.tar.gz
          chmod +x terraform-docs
          echo "$PWD" >> $GITHUB_PATH
      - run: python3 -m venv venv
      - run: . venv/bin/activate
      - run: pip install awscli --upgrade --user
      - run: aws --version
      - run: FOGG_VERSION="vundefined-pre+undefined.dirty" make setup
      - run: |
          .fogg/bin/fogg apply
          git status
          git diff
          if [ "$(git status --porcelain)" != "" ]; then
            echo "git tree is dirty after running fogg apply"
            echo "ensure you run fogg apply on your branch"
            git status
            exit 1
          fi
      - run: |
          echo "start"
  terraform_5:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set up Python 3.x
        uses: actions/setup-python@v1
        with:
          python-version: '3.6'
      - run: |
          # https://terraform-docs.io/user-guide/installation/#pre-compiled-binary
          curl -sSLo ./terraform-docs.tar.gz https://terraform-docs.io/dl/v0.14.1/terraform-docs-v0.14.1-$(uname)-amd64.tar.gz
          tar -xzf terraform-docs.tar.gz
          chmod +x terraform-docs
          echo "$PWD" >> $GITHUB_PATH
      - run: python3 -m venv venv
      - run: . venv/bin/activate
      - run: pip install awscli --upgrade --user
      - run: aws --version
      - run: FOGG_VERSION="vundefined-pre+undefined.dirty" make setup
      - run: |
          .fogg/bin/fogg apply
          git status
          git diff
          if [ "$(git status --porcelain)" != "" ]; then
            echo "git tree is dirty after running fogg apply"
            echo "ensure you run fogg apply on your branch"
            git status
            exit 1
          fi
      - run: |
          echo "start"
  terraform_6:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set up Python 3.x
        uses: actions/setup-python@v1
        with:
          python-version: '3.6'
      - run: |
          # https://terraform-docs.io/user-guide/installation/#pre-compiled-binary
          curl -sSLo ./terraform-docs.tar.gz https://terraform-docs.io/dl/v0.14.1/terraform-docs-v0.14.1-$(uname)-amd64.tar.gz
          tar -xzf terraform-docs.tar.gz
          chmod +x terraform-docs
          echo "$PWD" >> $GITHUB_PATH
      - run: python3 -m venv venv
      - run: . venv/bin/activate
      - run: pip install awscli --upgrade --user
      - run: aws --version
      - run: FOGG_VERSION="vundefined-pre+undefined.dirty" make setup
      - run: |
          .fogg/bin/fogg apply
          git status
          git diff
          if [ "$(git status --porcelain)" != "" ]; then
            echo "git tree is dirty after running fogg apply"
            echo "ensure you run fogg apply on your branch"
            git status
            exit 1
          fi
      - run: |
          echo "start"

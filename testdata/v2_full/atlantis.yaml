
# Auto-generated by fogg. Do not edit
# Make improvements in fogg, so that everyone can benefit.

---
version: 3
projects:

  - name: accounts/bar
    dir: terraform/accounts/bar
    terraform_version: 0.100.0
    workflow: fogg

  - name: accounts/foo
    dir: terraform/accounts/foo
    terraform_version: 0.100.0
    workflow: fogg

  - name: global
    dir: terraform/global
    terraform_version: 0.100.0
    workflow: fogg

  - name: staging/comp1
    dir: terraform/envs/staging/comp1
    terraform_version: 0.100.0
    workflow: fogg

  - name: staging/comp2
    dir: terraform/envs/staging/comp2
    terraform_version: 0.100.0
    workflow: fogg

  - name: staging/comp_helm_template
    dir: terraform/envs/staging/comp_helm_template
    terraform_version: 0.100.0
    workflow: fogg

  - name: staging/vpc
    dir: terraform/envs/staging/vpc
    terraform_version: 0.100.0
    workflow: fogg


workflows:
  fogg:
    plan:
      steps:
        - run: TF_IN_AUTOMATION=1 AWS_CONFIG_FILE=`git rev-parse --show-toplevel`/config/atlantis-aws-config terraform init -input=false -no-color > /tmp/out.txt 2>&1 || (a=$?; echo $a && cat /tmp/out.txt; exit $a)
        - run: TF_IN_AUTOMATION=1 AWS_CONFIG_FILE=`git rev-parse --show-toplevel`/config/atlantis-aws-config terraform plan -input=false -no-color | scenery
    apply:
      steps:
        - run: false # running in plan-only mode for now

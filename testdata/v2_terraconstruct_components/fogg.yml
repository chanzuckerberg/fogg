version: 2
defaults:
  backend:
    bucket: buck
    role: role
    account_id: 123456789012
    region: us-west-2
  owner: foo@example.com
  project: proj
  tools:
    atlantis:
      enabled: true
      version: 3
      automerge: true
      parallel_plan: true
      parallel_apply: true
  providers:
    aws:
      account_id: 123456789012
      role: role
      region: us-west-2
      version: 0.12.0
      additional_providers:
        shared_services:
          region: ap-southeast-1
          account_id: 210987654321
  terraform_version: 1.7.5
turbo:
  enabled: true
envs:
  test:
    components:
      lambda:
        providers:
          aws:
            default_tags:
              enabled: true
              tags:
                team: TIES
        required_providers:
          cloudflare:
            source: cloudflare/cloudflare
            version: "~> 4.0"
        kind: terraconstruct # required to ensure AwsStack is extended
        cdktf_dependencies:
          - name: "@types/aws-lambda"
            version: "^8.10.76"

modules:
  my-terraconstruct-foo:
    kind: cdktf # this is still a CDKTF module
    package_name: "my-terraconstruct-foo"
    cdktf_dependencies:
      - name: "@cdktf/provider-aws"
        version: "^19.34.0"
      - name: "terraconstructs"
        version: "0.0.9"
